# Quantum I-Ching ç³»çµ±æ¶æ§‹æ–‡ä»¶

æœ¬æ–‡æª”è©³ç´°èªªæ˜ Quantum I-Ching è‚¡å¸‚åœå¦ç³»çµ±çš„å®Œæ•´æ¶æ§‹ï¼ŒåŒ…å«å„å±¤æ¬¡çš„åŠŸèƒ½èªªæ˜èˆ‡è³‡æ–™æµç¨‹ã€‚

---

## ç³»çµ±æ¶æ§‹ç¸½è¦½

æœ¬ç³»çµ±æ¡ç”¨**å››å±¤æ¶æ§‹**è¨­è¨ˆï¼Œå¾è³‡æ–™ç²å–åˆ°æœ€çµ‚çš„AIè§£è®€ï¼Œå®Œæ•´å¯¦ç¾äº†æ˜“ç¶“æ™ºæ…§èˆ‡ç¾ä»£é‡‘èåˆ†æçš„çµåˆã€‚

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        æ‡‰ç”¨å±¤ (Application Layer)                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Streamlit       â”‚  â”‚  Oracle          â”‚  â”‚  CLI         â”‚ â”‚
â”‚  â”‚  Dashboard       â”‚  â”‚  (ç¥è«­æ ¸å¿ƒ)      â”‚  â”‚  (main.py)   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“ â†‘
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    çŸ¥è­˜æª¢ç´¢å±¤ (Knowledge Retrieval Layer)        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  IChingVectorStoreâ”‚  â”‚  IChingKnowledge â”‚  â”‚  iching_     â”‚ â”‚
â”‚  â”‚  (ChromaDB)       â”‚  â”‚  Loader          â”‚  â”‚  complete.jsonâ”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“ â†‘
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    å¦è±¡ç·¨ç¢¼å±¤ (Hexagram Encoding Layer)          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  MarketEncoder   â”‚  â”‚  IChingCore       â”‚  â”‚  HEXAGRAM_MAP â”‚ â”‚
â”‚  â”‚  (å››è±¡â†’å…­çˆ»)     â”‚  â”‚  (æœ¬å¦/ä¹‹å¦)      â”‚  â”‚  (64å¦å°ç…§è¡¨) â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“ â†‘
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    è³‡æ–™ç²å–å±¤ (Data Acquisition Layer)          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  MarketDataLoader â”‚  â”‚  Yahoo Finance   â”‚  â”‚  Config      â”‚ â”‚
â”‚  â”‚  (yfinance)       â”‚  â”‚  (å¤–éƒ¨API)        â”‚  â”‚  (è¨­å®šæª”)     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## è©³ç´°æ¶æ§‹åœ–ï¼ˆMermaidï¼‰

```mermaid
flowchart TB
    subgraph User["ğŸ‘¤ ä½¿ç”¨è€…"]
        UserInput[è¼¸å…¥è‚¡ç¥¨ä»£è™Ÿ/å•é¡Œ]
        UserView[æŸ¥çœ‹çµæœ]
    end

    subgraph AppLayer["ğŸ“± æ‡‰ç”¨å±¤ (Application Layer)"]
        Dashboard["dashboard.py<br/>Streamlit Web å„€è¡¨æ¿"]
        Oracle["oracle_chat.py<br/>Oracle é¡åˆ¥<br/>(ç¥è«­æ ¸å¿ƒ)"]
        CLI["main.py<br/>CLI å·¥å…·"]
    end

    subgraph KnowledgeLayer["ğŸ“š çŸ¥è­˜æª¢ç´¢å±¤ (Knowledge Retrieval Layer)"]
        VectorStore["vector_store.py<br/>IChingVectorStore<br/>(ChromaDB + SentenceTransformers)"]
        KnowledgeLoader["knowledge_loader.py<br/>IChingKnowledgeLoader<br/>(JSON â†’ æ–‡ä»¶ç‰©ä»¶)"]
        IChingJSON["data/iching_complete.json<br/>(64å¦å®Œæ•´è³‡æ–™)"]
        SetupDB["setup_iching_db.py<br/>(ä¸‹è¼‰æ˜“ç¶“è³‡æ–™)"]
        ConvertS2T["convert_iching_s2t.py<br/>(ç°¡é«”è½‰ç¹é«”)"]
    end

    subgraph EncodingLayer["ğŸ”¢ å¦è±¡ç·¨ç¢¼å±¤ (Hexagram Encoding Layer)"]
        MarketEncoder["market_encoder.py<br/>MarketEncoder<br/>(åƒ¹æ ¼â†’å››è±¡â†’å…­çˆ»)"]
        IChingCore["iching_core.py<br/>IChingCore<br/>(æœ¬å¦/ä¹‹å¦/å‹•çˆ»)"]
        HexMap["config.py<br/>HEXAGRAM_MAP<br/>(64å¦å°ç…§è¡¨)"]
    end

    subgraph DataLayer["ğŸ“Š è³‡æ–™ç²å–å±¤ (Data Acquisition Layer)"]
        DataLoader["data_loader.py<br/>MarketDataLoader<br/>(yfinance)"]
        YahooFinance["Yahoo Finance API<br/>(å¤–éƒ¨è³‡æ–™ä¾†æº)"]
        Config["config.py<br/>Settings<br/>(å…¨åŸŸè¨­å®š)"]
    end

    subgraph MLLayer["ğŸ¤– æ©Ÿå™¨å­¸ç¿’å±¤ (ML Layer) - å¯é¸"]
        DataProcessor["data_processor.py<br/>DataProcessor<br/>(æº–å‚™LSTMè³‡æ–™)"]
        LSTMModel["model_lstm.py<br/>QuantumLSTM<br/>(é›™æµEmbedding)"]
        Backtester["backtester.py<br/>QuantumBacktester<br/>(å›æ¸¬å¼•æ“)"]
    end

    subgraph External["ğŸŒ å¤–éƒ¨æœå‹™"]
        GeminiAPI["Google Gemini API<br/>(LLMç”Ÿæˆ)"]
    end

    %% ä½¿ç”¨è€…äº’å‹•
    UserInput --> Dashboard
    UserInput --> CLI
    Dashboard --> UserView
    CLI --> UserView

    %% æ‡‰ç”¨å±¤æµç¨‹
    Dashboard --> Oracle
    CLI --> DataLoader
    CLI --> MarketEncoder
    CLI --> IChingCore

    %% Oracle æ ¸å¿ƒæµç¨‹
    Oracle --> DataLoader
    Oracle --> MarketEncoder
    Oracle --> IChingCore
    Oracle --> VectorStore
    Oracle --> GeminiAPI

    %% çŸ¥è­˜æª¢ç´¢æµç¨‹
    VectorStore --> KnowledgeLoader
    KnowledgeLoader --> IChingJSON
    SetupDB --> IChingJSON
    ConvertS2T --> IChingJSON
    ConvertS2T --> VectorStore

    %% ç·¨ç¢¼æµç¨‹
    MarketEncoder --> IChingCore
    IChingCore --> HexMap

    %% è³‡æ–™ç²å–æµç¨‹
    DataLoader --> YahooFinance
    DataLoader --> Config
    MarketEncoder --> Config

    %% ML æµç¨‹ï¼ˆå¯é¸ï¼‰
    DataProcessor --> MarketEncoder
    DataProcessor --> IChingCore
    LSTMModel --> DataProcessor
    Backtester --> LSTMModel
    Backtester --> DataProcessor

    %% æ¨£å¼
    classDef appLayer fill:#e1f5ff,stroke:#01579b,stroke-width:2px
    classDef knowledgeLayer fill:#f3e5f5,stroke:#4a148c,stroke-width:2px
    classDef encodingLayer fill:#fff3e0,stroke:#e65100,stroke-width:2px
    classDef dataLayer fill:#e8f5e9,stroke:#1b5e20,stroke-width:2px
    classDef mlLayer fill:#fce4ec,stroke:#880e4f,stroke-width:2px
    classDef external fill:#fff9c4,stroke:#f57f17,stroke-width:2px

    class Dashboard,Oracle,CLI appLayer
    class VectorStore,KnowledgeLoader,IChingJSON,SetupDB,ConvertS2T knowledgeLayer
    class MarketEncoder,IChingCore,HexMap encodingLayer
    class DataLoader,YahooFinance,Config dataLayer
    class DataProcessor,LSTMModel,Backtester mlLayer
    class GeminiAPI external
```

---

## å„å±¤æ¬¡è©³ç´°èªªæ˜

### 1. è³‡æ–™ç²å–å±¤ (Data Acquisition Layer)

#### 1.1 `data_loader.py` - MarketDataLoader
**åŠŸèƒ½**ï¼šå¾ Yahoo Finance ç²å–æ­·å²è‚¡ç¥¨åƒ¹æ ¼è³‡æ–™

**ä¸»è¦æ–¹æ³•**ï¼š
- `fetch_data(tickers, market_type)`: ä¸‹è¼‰æŒ‡å®šè‚¡ç¥¨çš„æ­·å²è³‡æ–™
- `_format_ticker(ticker, market_type)`: æ ¹æ“šå¸‚å ´é¡å‹æ ¼å¼åŒ–è‚¡ç¥¨ä»£è™Ÿ

**æ”¯æ´å¸‚å ´**ï¼š
- **å°è‚¡ (TW)**: è‡ªå‹•è£œ `.TW` å¾Œç¶´ï¼ˆä¾‹å¦‚ `2330` â†’ `2330.TW`ï¼‰
- **ç¾è‚¡ (US)**: ç›´æ¥ä½¿ç”¨ä»£ç¢¼ï¼ˆä¾‹å¦‚ `NVDA`ï¼‰
- **åŠ å¯†è²¨å¹£ (CRYPTO)**: è‡ªå‹•è£œ `-USD`ï¼ˆä¾‹å¦‚ `BTC` â†’ `BTC-USD`ï¼‰

**è¼¸å‡ºè³‡æ–™æ ¼å¼**ï¼š
- DataFrame åŒ…å«ï¼š`Open`, `High`, `Low`, `Close`, `Volume`
- æ—¥æœŸç¯„åœç”± `config.py` çš„ `Settings` æ§åˆ¶

**è³‡æ–™æµç¨‹**ï¼š
```
Yahoo Finance API â†’ MarketDataLoader â†’ DataFrame (OHLCV)
```

---

#### 1.2 `config.py` - Settings & HEXAGRAM_MAP
**åŠŸèƒ½**ï¼šæä¾›å…¨åŸŸè¨­å®šèˆ‡64å¦å°ç…§è¡¨

**Settings é¡åˆ¥**ï¼š
- `START_DATE`: è³‡æ–™èµ·å§‹æ—¥æœŸ
- `END_DATE`: è³‡æ–™çµæŸæ—¥æœŸ
- `TARGET_TICKERS`: é è¨­è‚¡ç¥¨æ¸…å–®
- `MARKET_TYPE`: å¸‚å ´é¡å‹ï¼ˆUS/TW/CRYPTOï¼‰
- `YIN_YANG_THRESHOLD`: é™°é™½åˆ¤æ–·é–¾å€¼

**HEXAGRAM_MAP**ï¼š
- 64å¦äºŒé€²åˆ¶ç·¨ç¢¼ â†’ å¦è±¡è³‡è¨Šçš„å°ç…§è¡¨
- æ¯å€‹å¦åŒ…å«ï¼š`id` (1-64), `name` (è‹±æ–‡å), `nature` (ç¹é«”ä¸­æ–‡å)

---

### 2. å¦è±¡ç·¨ç¢¼å±¤ (Hexagram Encoding Layer)

#### 2.1 `market_encoder.py` - MarketEncoder
**åŠŸèƒ½**ï¼šå°‡è‚¡ç¥¨åƒ¹æ ¼èˆ‡æˆäº¤é‡è½‰æ›ç‚ºæ˜“ç¶“å¦è±¡

**æ ¸å¿ƒé‚è¼¯ï¼šå¤§è¡ä¹‹æ•¸æ©Ÿç‡åˆ†å¸ƒ**
- **6 (è€é™°)**: 1/16 (6.25%) - æ¥µä½èƒ½é‡ï¼Œé ç¤ºçªç ´
- **8 (å°‘é™°)**: 7/16 (43.75%) - ä½-ä¸­èƒ½é‡ï¼Œéœæ…‹å¸‚å ´
- **7 (å°‘é™½)**: 5/16 (31.25%) - ä¸­-é«˜èƒ½é‡ï¼Œæ´»èºä½†éœæ…‹
- **9 (è€é™½)**: 3/16 (18.75%) - æ¥µé«˜èƒ½é‡ï¼Œçªç ´

**ä¸»è¦æ–¹æ³•**ï¼š
- `generate_hexagrams(df, rvol_window)`: ç”Ÿæˆå…­çˆ»å¦è±¡
- `_calculate_technical_indicators(df)`: è¨ˆç®—æŠ€è¡“æŒ‡æ¨™
  - `Daily_Return`: æ—¥å ±é…¬ç‡
  - `Volume_MA20`: 20æ—¥æˆäº¤é‡ç§»å‹•å¹³å‡
  - `RVOL`: ç›¸å°æˆäº¤é‡ (Volume / Volume_MA20)
  - `RVOL_Percentile`: RVOL ç™¾åˆ†ä½æ•¸æ’å
- `_get_dayan_yao(rvol_percentile)`: æ ¹æ“šRVOLç™¾åˆ†ä½æ•¸æ±ºå®šå››è±¡

**è¼¸å‡ºæ¬„ä½**ï¼š
- `Ritual_Num`: å–®æ—¥å„€å¼æ•¸å­— (6/7/8/9)
- `Ritual_Sequence`: é€£çºŒ6å¤©çš„å„€å¼æ•¸å­—åºåˆ—ï¼ˆå­—ä¸²ï¼Œä¾‹å¦‚ "987896"ï¼‰
- `Hexagram_Binary`: äºŒé€²åˆ¶å­—ä¸²ï¼ˆç”¨æ–¼æŸ¥è©¢ HEXAGRAM_MAPï¼‰
- `Future_Hex_ID`: æœªä¾†å¦ï¼ˆä¹‹å¦ï¼‰çš„ ID
- `Num_Moving_Lines`: å‹•çˆ»æ•¸é‡ï¼ˆ6å’Œ9çš„æ•¸é‡ï¼‰

**è³‡æ–™æµç¨‹**ï¼š
```
DataFrame (OHLCV) â†’ è¨ˆç®—æŠ€è¡“æŒ‡æ¨™ â†’ RVOLç™¾åˆ†ä½æ•¸ â†’ å¤§è¡ä¹‹æ•¸æ˜ å°„ â†’ å››è±¡(6/7/8/9)
â†’ æ»¾å‹•çª—å£(6å¤©) â†’ Ritual_Sequence â†’ Hexagram_Binary â†’ æœ¬å¦ID
â†’ è¨ˆç®—ä¹‹å¦ â†’ Future_Hex_ID
```

---

#### 2.2 `iching_core.py` - IChingCore
**åŠŸèƒ½**ï¼šæ˜“ç¶“å¦è±¡è§£ç¢¼èˆ‡ä¹‹å¦è¨ˆç®—

**ä¸»è¦æ–¹æ³•**ï¼š
- `get_hexagram_name(binary_string)`: æ ¹æ“šäºŒé€²åˆ¶å­—ä¸²æŸ¥è©¢å¦è±¡è³‡è¨Š
- `calculate_future_hexagram(ritual_sequence)`: è¨ˆç®—æœªä¾†å¦ï¼ˆä¹‹å¦ï¼‰
  - **è®Šçˆ»è¦å‰‡**ï¼š
    - 9 (è€é™½) â†’ è®Šç‚º 0 (é™°çˆ»)
    - 6 (è€é™°) â†’ è®Šç‚º 1 (é™½çˆ»)
    - 7 (å°‘é™½) â†’ ä¿æŒ 1 (é™½çˆ»)
    - 8 (å°‘é™°) â†’ ä¿æŒ 0 (é™°çˆ»)
- `interpret_sequence(ritual_sequence)`: æ•´åˆè§£é‡‹ï¼Œè¿”å›æœ¬å¦/ä¹‹å¦/å‹•çˆ»

**è¼¸å‡ºæ ¼å¼**ï¼š
```python
{
    "current_hex": {
        "id": 1-64,
        "name": "Qian (The Creative)",
        "nature": "ä¹¾"
    },
    "future_hex": {
        "id": 1-64,
        "name": "...",
        "nature": "..."
    },
    "moving_lines": [1, 5, 6]  # å‹•çˆ»ä½ç½®ï¼ˆ1-basedï¼‰
}
```

**è³‡æ–™æµç¨‹**ï¼š
```
Ritual_Sequence â†’ æœ¬å¦äºŒé€²åˆ¶ â†’ æŸ¥è©¢HEXAGRAM_MAP â†’ æœ¬å¦è³‡è¨Š
â†’ è¨ˆç®—ä¹‹å¦äºŒé€²åˆ¶ â†’ æŸ¥è©¢HEXAGRAM_MAP â†’ ä¹‹å¦è³‡è¨Š
â†’ è­˜åˆ¥å‹•çˆ»(6/9) â†’ å‹•çˆ»åˆ—è¡¨
```

---

### 3. çŸ¥è­˜æª¢ç´¢å±¤ (Knowledge Retrieval Layer)

#### 3.1 `setup_iching_db.py`
**åŠŸèƒ½**ï¼šå¾ [john-walks-slow/open-iching](https://github.com/john-walks-slow/open-iching) ä¸‹è¼‰æ˜“ç¶“è³‡æ–™

**åŸ·è¡Œæµç¨‹**ï¼š
1. å¾ jsDelivr CDN ä¸‹è¼‰ `iching/iching.json`
2. é©—è­‰è³‡æ–™å®Œæ•´æ€§ï¼ˆå¿…é ˆåŒ…å«64å¦ï¼‰
3. è½‰æ›ç‚ºçµ±ä¸€æ ¼å¼
4. å„²å­˜è‡³ `data/iching_complete.json`

**è³‡æ–™æ ¼å¼**ï¼š
```json
[
  {
    "number": 1,
    "name": "Qian",
    "judgment": "å…ƒäº¨åˆ©è²",
    "image": "å¤©è¡Œå¥ï¼Œå›å­ä»¥è‡ªå¼·ä¸æ¯",
    "lines": [
      {"position": 1, "meaning": "...", "xiang": "..."},
      ...
    ]
  },
  ...
]
```

---

#### 3.2 `convert_iching_s2t.py`
**åŠŸèƒ½**ï¼šå°‡ç°¡é«”ä¸­æ–‡è½‰ç‚ºç¹é«”ä¸­æ–‡ä¸¦é‡å»ºå‘é‡è³‡æ–™åº«

**åŸ·è¡Œæµç¨‹**ï¼š
1. è®€å– `data/iching_complete.json`
2. ä½¿ç”¨ OpenCC å°‡ç°¡é«”è½‰ç¹é«”
3. é‡å»º ChromaDB å‘é‡è³‡æ–™åº«

---

#### 3.3 `knowledge_loader.py` - IChingKnowledgeLoader
**åŠŸèƒ½**ï¼šå°‡ JSON è½‰æ›ç‚ºå¯åµŒå…¥çš„æ–‡ä»¶ç‰©ä»¶

**IChingDocument çµæ§‹**ï¼š
```python
@dataclass
class IChingDocument:
    id: Union[int, str]  # ä¾‹å¦‚ "hex_1_main", "hex_1_line_1"
    content: str  # ç”¨æ–¼åµŒå…¥èˆ‡æª¢ç´¢çš„å…§æ–‡
    metadata: Dict[str, Any]  # hex_id, type, name, line_number
```

**ä¸»è¦æ–¹æ³•**ï¼š
- `load_documents()`: è¼‰å…¥ä¸¦åˆ‡æˆä¸»å¦ï¼‹å…­çˆ»æ–‡ä»¶åˆ—è¡¨
  - ä¸»å¦ï¼š`ã€{number}. {name}å¦ã€‘\nå¦è¾­ï¼š{judgment}\nè±¡æ›°ï¼š{image}`
  - çˆ»ï¼š`ã€{name}å¦ã€‘ {meaning}\nè±¡æ›°ï¼š{xiang}`
- `build_vector_db(persist_path)`: æ¸…é™¤ä¸¦é‡å»º ChromaDB é›†åˆ

**æ–‡ä»¶æ•¸é‡**ï¼š
- 64 ä¸»å¦ + 386 çˆ» = ç´„ 450 ä»½æ–‡ä»¶

---

#### 3.4 `vector_store.py` - IChingVectorStore
**åŠŸèƒ½**ï¼šä½¿ç”¨ ChromaDB é€²è¡Œæœ¬åœ°æŒä¹…åŒ–å„²å­˜èˆ‡èªç¾©æœå°‹

**æŠ€è¡“æ£§**ï¼š
- **å‘é‡è³‡æ–™åº«**: ChromaDB (æœ¬åœ°æŒä¹…åŒ–)
- **åµŒå…¥æ¨¡å‹**: SentenceTransformers (`all-MiniLM-L6-v2`)
- **å„²å­˜ä½ç½®**: `data/chroma_db/`

**ä¸»è¦æ–¹æ³•**ï¼š
- `add_documents(documents)`: å°‡æ–‡ä»¶åŠ å…¥å‘é‡è³‡æ–™åº«ï¼ˆä½¿ç”¨ upsertï¼‰
- `query(query_text, n_results, hex_id, doc_type, line_numbers)`: æŸ¥è©¢å‘é‡è³‡æ–™åº«
  - æ”¯æ´èªç¾©æœå°‹
  - æ”¯æ´ metadata åš´æ ¼éæ¿¾ï¼ˆç¢ºä¿åªåœ¨æŒ‡å®šå¦è±¡/çˆ»ä½ç¯„åœå…§æª¢ç´¢ï¼‰

**è³‡æ–™æµç¨‹**ï¼š
```
IChingDocument åˆ—è¡¨ â†’ ChromaDB åµŒå…¥ â†’ å‘é‡ç´¢å¼•
â†’ æŸ¥è©¢æ–‡å­— â†’ èªç¾©æœå°‹ + metadataéæ¿¾ â†’ ç›¸é—œæ–‡ä»¶
```

---

### 4. æ‡‰ç”¨å±¤ (Application Layer)

#### 4.1 `oracle_chat.py` - Oracle
**åŠŸèƒ½**ï¼šæ•´åˆæ‰€æœ‰æ¨¡çµ„ï¼Œæä¾›æ™ºæ…§åŒ–çš„é‡‘èå»ºè­°

**æ ¸å¿ƒåŠŸèƒ½**ï¼š
1. **å¸‚å ´å¦è±¡ç²å–**ï¼šæ•´åˆ `MarketDataLoader` + `MarketEncoder` + `IChingCore`
2. **ä¹‹å¦ç­–ç•¥è§£æ**ï¼šä¾å‹•çˆ»æ•¸é‡ï¼ˆ0-6ï¼‰å‹•æ…‹é¸æ“‡æŸ¥è©¢ç­–ç•¥
3. **è²/æ‚”æ¶æ§‹**ï¼šè²=ä¸»é«”/æ”¯æ’/é•·æœŸ/é€²å ´ï¼Œæ‚”=å®¢é«”/é˜»åŠ›/çŸ­æœŸ/å‡ºå ´
4. **æ˜“ç¶“æ–‡æœ¬æª¢ç´¢**ï¼šå¾ `iching_complete.json` åš´æ ¼æŠ½å–å°æ‡‰ç¶“æ–‡
5. **Gemini API æ•´åˆ**ï¼šç”Ÿæˆçµæ§‹åŒ–çš„æŠ•è³‡è§£è®€

**ä¹‹å¦ç­–ç•¥ (Zhi Gua Strategy)**ï¼š
- **0 å‹•çˆ»**: Total Acceptance - æŸ¥æœ¬å¦å¦è¾­/è±¡è¾­
- **1 å‹•çˆ»**: Specific Focus - æŸ¥è©²å‹•çˆ»æ–‡æœ¬
- **2 å‹•çˆ»**: Primary vs Secondary - ä¸‹çˆ»è²/ä¸Šçˆ»æ‚”
- **3 å‹•çˆ»**: Hedging Moment - æœ¬å¦è²/ä¹‹å¦æ‚”
- **4-5 å‹•çˆ»**: Trend Reversal - ä¹‹å¦è²/æœ¬å¦æ‚”
- **6 å‹•çˆ»**: Extreme Reversal - ä¹¾å¦ç”¨ã€Œç”¨ä¹ã€/å¤å¦ç”¨ã€Œç”¨å…­ã€/å…¶ä»–ç”¨ä¹‹å¦å¦è¾­

**ä¸»è¦æ–¹æ³•**ï¼š
- `ask(ticker, question, market_type, precomputed_data)`: è©¢å•ç¥è«­
- `_get_market_hexagram(ticker, market_type)`: ç²å–å¸‚å ´å¦è±¡
- `_resolve_strategy(current_hex_name, ritual_sequence)`: è§£æä¹‹å¦ç­–ç•¥
- `_get_iching_wisdom(search_queries, user_question)`: å¾ JSON æŠ½å–ç²¾ç¢ºç¶“æ–‡

**è¼¸å‡ºæ ¼å¼**ï¼š
```
ğŸš€ æŠ•è³‡å¿«è¨Š (Executive Summary)
ğŸ“œ æ˜“ç¶“åŸæ–‡ (The Source)
ğŸ’¡ ç¾ä»£è§£è®€ (Modern Decoding)
ğŸ“ˆ æ“ä½œå»ºè­° (Action Plan)
```

**è³‡æ–™æµç¨‹**ï¼š
```
ç”¨æˆ¶å•é¡Œ + è‚¡ç¥¨ä»£è™Ÿ
â†’ ç²å–å¸‚å ´å¦è±¡ (ritual_sequence, æœ¬å¦/ä¹‹å¦)
â†’ è§£æä¹‹å¦ç­–ç•¥ (ä¾å‹•çˆ»æ•¸é‡)
â†’ å¾ iching_complete.json æŠ½å–å°æ‡‰ç¶“æ–‡
â†’ æ§‹é€ ç³»çµ±æç¤º (å«è²/æ‚”æ¡†æ¶)
â†’ Gemini API ç”Ÿæˆå›ç­”
â†’ è¿”å›çµæ§‹åŒ–è§£è®€
```

---

#### 4.2 `dashboard.py` - Streamlit Web å„€è¡¨æ¿
**åŠŸèƒ½**ï¼šæä¾›å°ˆæ¥­é‡‘èçµ‚ç«¯é¢¨æ ¼çš„å‰ç«¯ä»‹é¢

**ä¸»è¦åŠŸèƒ½**ï¼š
1. **å·¦å´å´é‚Šæ¬„**ï¼š
   - å¸‚å ´é¡å‹é¸æ“‡ï¼ˆTW/US/CRYPTOï¼‰
   - è‚¡ç¥¨ä»£è™Ÿè¼¸å…¥ï¼ˆå°è‚¡æ”¯æ´ç´”æ•¸å­—ï¼Œä¾‹å¦‚ `2330`ï¼‰
   - å•é¡Œè¼¸å…¥
   - ã€ŒConsult the Oracleã€æŒ‰éˆ•

2. **ä¸­é–“ä¸»å€åŸŸ**ï¼š
   - **K ç·šåœ–**ï¼šæœ€è¿‘60æ—¥ï¼ŒPlotly White ä¸»é¡Œ
   - **æŠ€è¡“è¨»è§£**ï¼šMA20ï¼ˆé»ƒè‰²ï¼Œè²/Supportï¼‰ã€MA60ï¼ˆç´«è‰²ï¼Œæ‚”/Resistanceï¼‰
   - **é‡åŒ–æ©‹æ¥æŒ‡æ¨™åˆ—**ï¼š
     - æ”¶ç›¤åƒ¹ï¼ˆå«æ¼²è·Œå¹…ï¼‰
     - RVOLï¼ˆç›¸å°æˆäº¤é‡ï¼‰
     - ç³»çµ±ç‹€æ…‹ï¼ˆStable/Active/Volatileï¼‰
     - è¶¨å‹¢å¼·åº¦ï¼ˆBullish ğŸ‚ / Bearish ğŸ»ï¼‰

3. **å³å´å¦è±¡å¡ç‰‡**ï¼š
   - **ç„¡å‹•çˆ»**ï¼šå–®ä¸€æœ¬å¦é¡¯ç¤º
   - **æœ‰å‹•çˆ»**ï¼šæœ¬å¦ â†’ ä¹‹å¦ä¸¦æ’é¡¯ç¤ºï¼Œå‹•çˆ»æ©™è‰²é«˜äº®
   - **æƒ…ç·’å„€è¡¨**ï¼šè‡ªè¨‚é€²åº¦æ¢é¡¯ç¤ºå¤šæ–¹èƒ½é‡ï¼ˆé™½çˆ»æ¯”ä¾‹ï¼‰

4. **Oracle è§£è®€å€å¡Š**ï¼š
   - ğŸš€ æŠ•è³‡å¿«è¨Šï¼ˆæ°¸é é¡¯ç¤ºï¼‰
   - ğŸ¯ é—œéµæ“ä½œå»ºè­°ï¼ˆæ°¸é é¡¯ç¤ºï¼Œä¾èªæ°£è‡ªå‹•é¸æ“‡è‰²å½©ï¼‰
   - ğŸ“œ æ˜“ç¶“åŸæ–‡ï¼ˆå¯æ‘ºç–Šï¼‰
   - ğŸ’¡ ç¾ä»£è§£è®€ï¼ˆå¯æ‘ºç–Šï¼‰

**é—œéµè¨­è¨ˆ**ï¼š
- **Calculate Once, Use Everywhere**: å¦è±¡è¨ˆç®—ä¸€æ¬¡ï¼Œå‰å¾Œç«¯å…±äº«
- ä½¿ç”¨ `precomputed_data` åƒæ•¸é¿å… Oracle é‡è¤‡è¨ˆç®—
- æ”¯æ´å¤šå¸‚å ´ï¼ˆå°è‚¡/ç¾è‚¡/åŠ å¯†è²¨å¹£ï¼‰

**è³‡æ–™æµç¨‹**ï¼š
```
ä½¿ç”¨è€…è¼¸å…¥ â†’ Dashboard
â†’ MarketDataLoader.fetch_data()
â†’ MarketEncoder.generate_hexagrams()
â†’ IChingCore.interpret_sequence()
â†’ çµ„æˆ current_market_state
â†’ ç•« K ç·šåœ–ã€å¦è±¡è¦–è¦ºåŒ–
â†’ Oracle.ask(precomputed_data=current_market_state)
â†’ é¡¯ç¤º Oracle è§£è®€
```

---

#### 4.3 `main.py` - CLI å·¥å…·
**åŠŸèƒ½**ï¼šæä¾›å‘½ä»¤åˆ—ä»‹é¢çš„æ˜“ç¶“åˆ†æå·¥å…·

**åŸ·è¡Œæµç¨‹**ï¼š
1. è¼‰å…¥å¸‚å ´è³‡æ–™ (`MarketDataLoader`)
2. ç·¨ç¢¼ç‚ºæ˜“ç¶“å¦è±¡ (`MarketEncoder`)
3. è§£ç¢¼å¦è±¡ (`IChingCore`)
4. é¡¯ç¤º ASCII è—è¡“å¦è±¡èˆ‡åˆ†æå ±å‘Š

**è¼¸å‡ºæ ¼å¼**ï¼š
- å„€å¼æ•¸å­—åºåˆ—
- äºŒé€²åˆ¶ç·¨ç¢¼
- ç•¶å‰å¦/æœªä¾†å¦è³‡è¨Š
- å‹•çˆ»åˆ—è¡¨
- ASCII è—è¡“å¦è±¡

---

### 5. æ©Ÿå™¨å­¸ç¿’å±¤ (ML Layer) - å¯é¸

#### 5.1 `data_processor.py` - DataProcessor
**åŠŸèƒ½**ï¼šå°‡å¸‚å ´è³‡æ–™å’Œæ˜“ç¶“å¦è±¡è½‰æ›ç‚ºé©åˆ LSTM è¨“ç·´çš„æ ¼å¼

**é›™æµ Embedding æ¶æ§‹**ï¼š
- **ä¸»å¦ Embedding**: ä»£è¡¨ç•¶å‰å¸‚å ´ç‹€æ…‹
- **è®Šå¦ Embedding**: ä»£è¡¨æœªä¾†è®Šå‹•æ–¹å‘
- **æ•¸å€¼ç‰¹å¾µ**: Close, Volume, RVOL, Daily_Return, Num_Moving_Lines

**ä¸»è¦æ–¹æ³•**ï¼š
- `prepare_data(encoded_df)`: æº–å‚™è¨“ç·´è³‡æ–™
  - è¿”å›ï¼š`(X_num, X_main_hex, X_future_hex, y)`
- `extract_iching_features(ritual_sequence)`: æå–æ˜“ç¶“æ•¸å€¼ç‰¹å¾µ

---

#### 5.2 `model_lstm.py` - QuantumLSTM
**åŠŸèƒ½**ï¼šé›™æµ Embedding LSTM æ¨¡å‹

**æ¶æ§‹è¨­è¨ˆ**ï¼š
```
è¼¸å…¥å±¤ï¼š
  - æ•¸å€¼ç‰¹å¾µ (5 ç¶­): [Close, Volume, RVOL, Daily_Return, Num_Moving_Lines]
  - ä¸»å¦ ID (0-63) â†’ Embedding (8 ç¶­)
  - è®Šå¦ ID (0-63) â†’ Embedding (8 ç¶­)

ç‰¹å¾µèåˆï¼š
  [æ•¸å€¼ç‰¹å¾µ(5) + ä¸»å¦åµŒå…¥(8) + è®Šå¦åµŒå…¥(8)] â†’ ç¸½è¨ˆ 21 ç¶­

LSTM å±¤ï¼š
  - 2 å±¤ LSTMï¼Œéš±è—ç¶­åº¦ 64
  - Dropout 0.2

è¼¸å‡ºå±¤ï¼š
  - å…¨é€£æ¥å±¤ â†’ Sigmoid â†’ äºŒåˆ†é¡æ©Ÿç‡ï¼ˆä¸Šæ¼²/ä¸‹è·Œï¼‰
```

---

#### 5.3 `backtester.py` - QuantumBacktester
**åŠŸèƒ½**ï¼šç­–ç•¥å›æ¸¬å¼•æ“

**ä¸»è¦æ–¹æ³•**ï¼š
- `run_backtest()`: åŸ·è¡Œå›æ¸¬æµç¨‹
- `_prepare_aligned_dataframe()`: æº–å‚™å°é½Šçš„è³‡æ–™æ¡†

---

## å®Œæ•´è³‡æ–™æµç¨‹åœ–

```mermaid
sequenceDiagram
    participant User as ğŸ‘¤ ä½¿ç”¨è€…
    participant Dashboard as ğŸ“± Dashboard
    participant DataLoader as ğŸ“Š MarketDataLoader
    participant Encoder as ğŸ”¢ MarketEncoder
    participant Core as ğŸ”¢ IChingCore
    participant Oracle as ğŸ”® Oracle
    participant VectorStore as ğŸ“š VectorStore
    participant JSON as ğŸ“„ iching_complete.json
    participant Gemini as ğŸ¤– Gemini API

    User->>Dashboard: è¼¸å…¥è‚¡ç¥¨ä»£è™Ÿ/å•é¡Œ
    Dashboard->>DataLoader: fetch_data(ticker, market_type)
    DataLoader->>DataLoader: æ ¼å¼åŒ– ticker (ä¾‹å¦‚ 2330 â†’ 2330.TW)
    DataLoader-->>Dashboard: raw_df (OHLCV)

    Dashboard->>Encoder: generate_hexagrams(raw_df)
    Encoder->>Encoder: è¨ˆç®—æŠ€è¡“æŒ‡æ¨™ (RVOL, RVOL_Percentile)
    Encoder->>Encoder: å¤§è¡ä¹‹æ•¸æ˜ å°„ (RVOL â†’ 6/7/8/9)
    Encoder->>Encoder: æ»¾å‹•çª—å£ (6å¤©) â†’ Ritual_Sequence
    Encoder->>Core: è¨ˆç®—æœ¬å¦/ä¹‹å¦
    Core-->>Encoder: æœ¬å¦/ä¹‹å¦è³‡è¨Š
    Encoder-->>Dashboard: encoded_df (å« Ritual_Sequence, Hexagram_Binary)

    Dashboard->>Core: interpret_sequence(ritual_sequence)
    Core-->>Dashboard: current_hex, future_hex, moving_lines

    Dashboard->>Dashboard: çµ„æˆ current_market_state
    Dashboard->>Dashboard: ç•« K ç·šåœ–ã€å¦è±¡è¦–è¦ºåŒ–

    Dashboard->>Oracle: ask(ticker, question, precomputed_data)
    Oracle->>Oracle: _resolve_strategy(æœ¬å¦å, ritual_sequence)
    Oracle->>Oracle: ä¾å‹•çˆ»æ•¸é‡æ±ºå®šæŸ¥è©¢ç­–ç•¥
    Oracle->>JSON: ä¾ hex_id + line_number æŠ½å–ç¶“æ–‡
    JSON-->>Oracle: æœ¬å¦ï¼‹ä¹‹å¦ï¼‹å‹•çˆ»åŸæ–‡

    Oracle->>Oracle: å»ºç«‹ç³»çµ±æç¤ºï¼ˆå«è²/æ‚”æ¡†æ¶ï¼‰
    Oracle->>Gemini: generate_content(system_prompt)
    Gemini-->>Oracle: çµæ§‹åŒ–å›ç­” (Markdown)

    Oracle-->>Dashboard: åœå¦è§£è®€
    Dashboard-->>User: é¡¯ç¤ºçµæœ (Kç·šåœ– + å¦è±¡ + è§£è®€)
```

---

## é—œéµè¨­è¨ˆæ±ºç­–

### 1. Calculate Once, Use Everywhere
- Dashboard è¨ˆç®—å¦è±¡ä¸€æ¬¡ï¼Œå‚³çµ¦ Oracle ä½¿ç”¨ `precomputed_data`
- é¿å…é‡è¤‡è¨ˆç®—ï¼Œç¢ºä¿å‰å¾Œç«¯å¦è±¡ä¸€è‡´

### 2. åš´æ ¼å°æ‡‰æ˜“ç¶“åŸæ–‡
- ä¸å†ä¾è³´èªç¾©æœå°‹æ±ºå®šã€Œæ˜¯å“ªä¸€å¦ã€
- ç›´æ¥å¾ `iching_complete.json` ä¾ `hex_id` + `line_number` æŠ½å–
- ç¢ºä¿æ˜“ç¶“åŸæ–‡èˆ‡å¸‚å ´å¦è±¡ 100% ä¸€è‡´

### 3. ä¹‹å¦ç­–ç•¥ç³»çµ±åŒ–
- ä¾å‹•çˆ»æ•¸é‡ï¼ˆ0-6ï¼‰å‹•æ…‹é¸æ“‡æŸ¥è©¢ç­–ç•¥
- çµåˆè²/æ‚”æ¶æ§‹ï¼Œæä¾›çµæ§‹åŒ–çš„é¢¨éšª/æ©Ÿæœƒåˆ†æ

### 4. å¤§è¡ä¹‹æ•¸æ©Ÿç‡åˆ†å¸ƒ
- ä½¿ç”¨å‚³çµ±æ˜“ç¶“æ©Ÿç‡åˆ†å¸ƒæ˜ å°„ RVOL ç™¾åˆ†ä½æ•¸
- ç¬¦åˆæ˜“ç¶“å‚³çµ±ï¼Œè€Œéç°¡å–®çš„ç·šæ€§æ˜ å°„

### 5. å¤šå¸‚å ´æ”¯æ´
- çµ±ä¸€çš„å¸‚å ´é¡å‹è™•ç†ï¼ˆTW/US/CRYPTOï¼‰
- è‡ªå‹•æ ¼å¼åŒ– tickerï¼Œä½¿ç”¨è€…ç„¡éœ€æ‰‹å‹•è¼¸å…¥å¾Œç¶´

---

## æª”æ¡ˆå°ç…§è¡¨

| æª”æ¡ˆ | é¡åˆ¥/å‡½æ•¸ | åŠŸèƒ½ | å±¤æ¬¡ |
|------|----------|------|------|
| `data_loader.py` | `MarketDataLoader` | å¾ Yahoo Finance ç²å–è³‡æ–™ | è³‡æ–™ç²å–å±¤ |
| `market_encoder.py` | `MarketEncoder` | åƒ¹æ ¼â†’å››è±¡â†’å…­çˆ»ç·¨ç¢¼ | å¦è±¡ç·¨ç¢¼å±¤ |
| `iching_core.py` | `IChingCore` | æœ¬å¦/ä¹‹å¦/å‹•çˆ»è¨ˆç®— | å¦è±¡ç·¨ç¢¼å±¤ |
| `config.py` | `Settings`, `HEXAGRAM_MAP` | å…¨åŸŸè¨­å®šèˆ‡64å¦å°ç…§è¡¨ | è³‡æ–™ç²å–å±¤/å¦è±¡ç·¨ç¢¼å±¤ |
| `setup_iching_db.py` | - | ä¸‹è¼‰æ˜“ç¶“è³‡æ–™ | çŸ¥è­˜æª¢ç´¢å±¤ |
| `convert_iching_s2t.py` | - | ç°¡é«”è½‰ç¹é«” | çŸ¥è­˜æª¢ç´¢å±¤ |
| `knowledge_loader.py` | `IChingKnowledgeLoader` | JSON â†’ æ–‡ä»¶ç‰©ä»¶ | çŸ¥è­˜æª¢ç´¢å±¤ |
| `vector_store.py` | `IChingVectorStore` | ChromaDB å‘é‡è³‡æ–™åº« | çŸ¥è­˜æª¢ç´¢å±¤ |
| `oracle_chat.py` | `Oracle` | ç¥è«­æ ¸å¿ƒï¼ˆæ•´åˆæ‰€æœ‰æ¨¡çµ„ï¼‰ | æ‡‰ç”¨å±¤ |
| `dashboard.py` | - | Streamlit Web å„€è¡¨æ¿ | æ‡‰ç”¨å±¤ |
| `main.py` | `main()` | CLI å·¥å…· | æ‡‰ç”¨å±¤ |
| `data_processor.py` | `DataProcessor` | æº–å‚™ LSTM è¨“ç·´è³‡æ–™ | MLå±¤ |
| `model_lstm.py` | `QuantumLSTM` | é›™æµ Embedding LSTM | MLå±¤ |
| `backtester.py` | `QuantumBacktester` | å›æ¸¬å¼•æ“ | MLå±¤ |

---

## æŠ€è¡“æ£§ç¸½çµ

- **è³‡æ–™ç²å–**: yfinance, pandas, numpy
- **å‘é‡è³‡æ–™åº«**: ChromaDB
- **åµŒå…¥æ¨¡å‹**: SentenceTransformers (all-MiniLM-L6-v2)
- **LLM**: Google Gemini API (gemini-2.5-flash)
- **å‰ç«¯**: Streamlit
- **è¦–è¦ºåŒ–**: Plotly
- **æ©Ÿå™¨å­¸ç¿’**: PyTorch, XGBoost
- **è³‡æ–™è™•ç†**: pandas, numpy, sklearn

---

## ç¸½çµ

Quantum I-Ching ç³»çµ±æ¡ç”¨**å››å±¤æ¶æ§‹**è¨­è¨ˆï¼Œå¾è³‡æ–™ç²å–åˆ°æœ€çµ‚çš„AIè§£è®€ï¼Œå®Œæ•´å¯¦ç¾äº†æ˜“ç¶“æ™ºæ…§èˆ‡ç¾ä»£é‡‘èåˆ†æçš„çµåˆã€‚ç³»çµ±çš„æ ¸å¿ƒå‰µæ–°åœ¨æ–¼ï¼š

1. **ç³»çµ±åŒ–çš„ä¹‹å¦ç­–ç•¥**ï¼šä¾å‹•çˆ»æ•¸é‡å‹•æ…‹é¸æ“‡æŸ¥è©¢ç­–ç•¥
2. **è²/æ‚”æ¶æ§‹**ï¼šæä¾›çµæ§‹åŒ–çš„é¢¨éšª/æ©Ÿæœƒåˆ†æ
3. **åš´æ ¼å°æ‡‰æ˜“ç¶“åŸæ–‡**ï¼šç¢ºä¿æ˜“ç¶“æ–‡æœ¬èˆ‡å¸‚å ´å¦è±¡ 100% ä¸€è‡´
4. **å¤šå¸‚å ´æ”¯æ´**ï¼šçµ±ä¸€çš„ä»‹é¢æ”¯æ´å°è‚¡/ç¾è‚¡/åŠ å¯†è²¨å¹£
5. **Calculate Once, Use Everywhere**ï¼šå¦è±¡è¨ˆç®—ä¸€æ¬¡ï¼Œå‰å¾Œç«¯å…±äº«

æ•´å€‹ç³»çµ±è¨­è¨ˆæ¨¡çµ„åŒ–ã€æ˜“æ–¼æ“´å±•ï¼Œä¸¦æä¾›äº†å®Œæ•´çš„éŒ¯èª¤è™•ç†èˆ‡æ—¥èªŒè¨˜éŒ„æ©Ÿåˆ¶ã€‚
