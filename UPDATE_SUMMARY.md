# Dashboard 更新摘要 (2026-01-26)

## 🎨 主要更新內容

### 1. **自適應深淺色主題**
- ✅ 自動偵測使用者系統主題（深色/淺色模式）
- ✅ 深色模式下提供高對比度顏色，確保所有文字清晰可讀
- ✅ 側邊欄、按鈕、輸入框等元件自動適應主題
- ✅ 圖表自動調整為適合的顏色方案（強制使用白色背景、黑色文字以確保可讀性）

### 2. **K 線圖樣式優化**
- ✅ 移除 MA20/MA60 移動平均線（簡化圖表）
- ✅ 新增縱向交替背景色塊（淺灰色 #e8e8e8 與白色 #ffffff）
- ✅ Y 軸使用深灰色網格線 (#808080)
- ✅ X 軸標籤置中對齊
- ✅ X, Y 軸線完全隱藏（透明）

### 3. **AI 小幫手追問系統**
- ✅ 在 Oracle's Advice 下方新增獨立的 AI 追問區塊
- ✅ 支援針對已生成的建議進行追問與討論
- ✅ 使用 Google Gemini 提供即時回應
- ✅ 顯示完整的問答討論串
- ✅ Oracle's Advice 不會因為追問而重新生成或消失

### 4. **波動率圖表改進**
- ✅ 百分比數字自動適應螢幕大小並居中顯示
- ✅ 響應式設計，支援不同螢幕尺寸

### 5. **介面本地化**
- ✅ 網頁標題改為中文「量子易經」
- ✅ 問題區塊固定為「目前趨勢」

### 6. **Bug 修復**
- ✅ 修復 AI 追問系統頁面重置問題
- ✅ 修復 Oracle's Advice 重複顯示問題
- ✅ 修復深色模式下圖表文字不可讀問題
- ✅ 修復載入狀態顯示問題

---

## 📝 技術細節

- **深色模式偵測**: 使用 CSS `@media (prefers-color-scheme: dark)` 和 JavaScript `window.matchMedia`
- **圖表顏色強制覆蓋**: Python 設定 + JavaScript 動態調整 + CSS `!important` 規則
- **狀態管理**: 使用 `st.session_state` 管理追問歷史和 Oracle's Advice 快取
- **色塊實作**: 使用 Plotly `shapes` 功能建立縱向交替背景

---

## 🚀 使用方式

所有功能自動啟用，無需額外設定：
- 深色模式會根據使用者系統設定自動切換
- AI 小幫手在 Oracle's Advice 生成後即可使用
- 圖表樣式已自動套用

---

## 📁 修改檔案

- `dashboard.py`: 主要更新檔案（UI/UX 改進、Bug 修復）
